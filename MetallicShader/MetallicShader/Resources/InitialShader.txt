#include <metal_stdlib>
#import <simd/simd.h>
using namespace metal;

typedef struct {
    matrix_float4x4 modelMatrix;
    matrix_float4x4 viewMatrix;
    matrix_float4x4 projectionMatrix;
} Uniforms;

struct VertexIn {
    float4 position [[ attribute(0) ]];
};

vertex float4 vertex_main(const VertexIn vertex_in [[stage_in]],
                          constant Uniforms &uniforms [[buffer(1)]],
                          constant matrix_float4x4 &translateMat [[buffer(2)]]) {
    float4 position = uniforms.projectionMatrix *
                        uniforms.viewMatrix *
                        translateMat *
                        uniforms.modelMatrix *
                        vertex_in.position;
                            
    return position;
}

fragment float4 fragment_main() {
    return float4(0, 0.4, 0.21, 1);
}
